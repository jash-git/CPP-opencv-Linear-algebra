<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<!-- saved from url=(0051)https://www.raben.com/content/linear-algebra-opencv -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" version="XHTML+RDFa 1.0" dir="ltr" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/terms/" xmlns:foaf="http://xmlns.com/foaf/0.1/" xmlns:og="http://ogp.me/ns#" xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" xmlns:sioc="http://rdfs.org/sioc/ns#" xmlns:sioct="http://rdfs.org/sioc/types#" xmlns:skos="http://www.w3.org/2004/02/skos/core#" xmlns:xsd="http://www.w3.org/2001/XMLSchema#" class="js"><head profile="http://www.w3.org/1999/xhtml/vocab"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
<meta name="Generator" content="Drupal 7 (http://drupal.org)">
<link rel="canonical" href="https://www.raben.com/content/linear-algebra-opencv">
<link rel="shortlink" href="https://www.raben.com/node/19">
<link rel="shortcut icon" href="https://www.raben.com/sites/default/files/favicon_2.png" type="image/png">
  <title>Linear algebra with OpenCV | Raben Systems, Inc.</title>
  <link type="text/css" rel="stylesheet" href="./Linear algebra with OpenCV _ Raben Systems, Inc._files/css_xE-rWrJf-fncB6ztZfd2huxqgxu4WO-qwma6Xer30m4.css" media="all">
<link type="text/css" rel="stylesheet" href="./Linear algebra with OpenCV _ Raben Systems, Inc._files/css_hK9e16HbdouPlIaYGwz-X4XYZvNx9-bhxre8Kd0AzK4.css" media="all">
<link type="text/css" rel="stylesheet" href="./Linear algebra with OpenCV _ Raben Systems, Inc._files/css_RC5GCWriztS5RyeuP_ht0PTr0eDJfB2urDx0T2DmNJE.css" media="all">
<link type="text/css" rel="stylesheet" href="./Linear algebra with OpenCV _ Raben Systems, Inc._files/css_EI1TYmJWBbHD1mAL8x9NnmPZfMjTznIZ2HpDCumHE20.css" media="all">
<link type="text/css" rel="stylesheet" href="./Linear algebra with OpenCV _ Raben Systems, Inc._files/css_k3snrbsthqot7V7ccRZHS9OkCZkwBv4adtNieIVlbEU.css" media="print">

<!--[if lt IE 7]>
<link type="text/css" rel="stylesheet" href="https://www.raben.com/themes/garland/fix-ie.css?phwri4" media="all" />
<![endif]-->
  <script type="text/javascript" src="./Linear algebra with OpenCV _ Raben Systems, Inc._files/js_vDrW3Ry_4gtSYaLsh77lWhWjIC6ml2QNkcfvfP5CVFs.js.下載"></script>
<script type="text/javascript" src="./Linear algebra with OpenCV _ Raben Systems, Inc._files/js_yx5ZN5trTN0DNnpqvl5nCzrG6JEfe-gCqBqr-5_Aavs.js.下載"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"garland","theme_token":"BhFPXqmi6xbpIdHdlhrFXwgnPjIcxuURWl15eg819Us","js":{"sites\/all\/modules\/syntaxhighlighter\/syntaxhighlighter.min.js":1,"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shCore.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushBash.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushCpp.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushCss.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushJScript.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPhp.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushPython.js":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/scripts\/shBrushSql.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/book\/book.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"sites\/all\/modules\/ckeditor\/css\/ckeditor.css":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/styles\/shCore.css":1,"sites\/all\/libraries\/syntaxhighlighter_3.0.83\/styles\/shThemeMDUltra.css":1,"themes\/garland\/style.css":1,"themes\/garland\/print.css":1,"themes\/garland\/fix-ie.css":1}}});
//--><!]]>
</script>
</head>
<body class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-19 node-type-book fluid-width">
  <div id="skip-link">
    <a href="https://www.raben.com/content/linear-algebra-opencv#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
      
  <div id="wrapper">
    <div id="container" class="clearfix">

      <div id="header">
        <div id="logo-floater">
                              <div id="branding"><strong><a href="https://www.raben.com/">
                        <span>Raben Systems, Inc.</span>            </a></strong></div>
                          </div>

        <h2 class="element-invisible">Main menu</h2><ul class="links inline main-menu"><li class="menu-218 first last"><a href="https://www.raben.com/">Home</a></li>
</ul>              </div> <!-- /#header -->

              <div id="sidebar-first" class="sidebar">
            <div class="region region-sidebar-first">
    <div id="block-system-navigation" class="block block-system block-menu clearfix">

    <h2 class="title">Navigation</h2>
  
  <div class="content">
    <ul class="menu"><li class="first leaf"><a href="https://www.raben.com/allsky/view" title="View images from all sky camera">All Sky Camera</a></li>
<li class="leaf"><a href="https://www.raben.com/content/all-sky-camera-software" title="Examples and description of all sky camera software to monitor weather conditions and detect meteors.">All Sky Camera software</a></li>
<li class="last leaf"><a href="https://www.raben.com/maps">Solar Map of Active Regions</a></li>
</ul>  </div>
</div>
  </div>
        </div>
      
      <div id="center"><div id="squeeze"><div class="right-corner"><div class="left-corner">
          <h2 class="element-invisible">You are here</h2><div class="breadcrumb"><a href="https://www.raben.com/">Home</a></div>                    <a id="main-content"></a>
          <div id="tabs-wrapper" class="clearfix">                                <h1 class="with-tabs">Linear algebra with OpenCV</h1>
                              </div>                                                  <div class="clearfix">
              <div class="region region-content">
    <div id="block-system-main" class="block block-system clearfix">

    
  <div class="content">
    <div id="node-19" class="node node-book node-promoted" about="/content/linear-algebra-opencv" typeof="sioc:Item foaf:Document">

  
      <span property="dc:title" content="Linear algebra with OpenCV" class="rdf-meta element-hidden"></span><span property="sioc:num_replies" content="0" datatype="xsd:integer" class="rdf-meta element-hidden"></span>
      <span class="submitted"><span property="dc:date dc:created" content="2012-11-20T10:22:10-07:00" datatype="xsd:dateTime" rel="sioc:has_creator">Tue, 11/20/2012 - 10:22 — <span class="username" xml:lang="" about="/users/vern" typeof="sioc:UserAccount" property="foaf:name" datatype="">Vern</span></span></span>
  
  <div class="content clearfix">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden"><div class="field-items"><div class="field-item even" property="content:encoded"><p>The <a href="http://www.opencv.org/">OpenCV image processing libraries</a> provides hundreds of computer vision algorithms useful in a wide variety of imaging applications.  The "core" of the library supports numerous matrix operations which are useful for processing images and for solving linear equations.</p>
<p>A matrix is just a rectangular array of numbers arranged in rows and columns.  Here is an example of how to load values into a matrix with 2 rows and 2 columns and add them:</p>
<div><div id="highlighter_532854" class="syntaxhighlighter nogutter  cpp"><div class="toolbar"><span><a href="https://www.raben.com/content/linear-algebra-opencv#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp preprocessor">#include &lt;iostream&gt;</code></div><div class="line number2 index1 alt1"><code class="cpp preprocessor">#include &lt;opencv2/core/core.hpp&gt;</code></div><div class="line number3 index2 alt2"><code class="cpp keyword bold">using</code> <code class="cpp keyword bold">namespace</code> <code class="cpp plain">std;</code></div><div class="line number4 index3 alt1"><code class="cpp keyword bold">using</code> <code class="cpp keyword bold">namespace</code> <code class="cpp plain">cv;</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="cpp keyword bold">void</code> <code class="cpp plain">addMatrixExample() {</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">a[2][2] = {{1, 2},</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{3, 4}};</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">b[2][2] = {{5, 6},</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{7, 8}};</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat A = Mat(2, 2, CV_32FC1, a);</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat B = Mat(2, 2, CV_32FC1, b);</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat C;</code></div><div class="line number15 index14 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">C = A + B;</code></div><div class="line number16 index15 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">cout &lt;&lt; </code><code class="cpp string">"C ="</code> <code class="cpp plain">&lt;&lt; endl &lt;&lt; </code><code class="cpp string">" "</code> <code class="cpp plain">&lt;&lt; C &lt;&lt; endl &lt;&lt; endl;</code></div><div class="line number17 index16 alt2"><code class="cpp plain">}</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="cpp color1 bold">int</code> <code class="cpp plain">main() {</code></div><div class="line number20 index19 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">addMatrixExample();</code></div><div class="line number21 index20 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div><p>
This will output:</p>
<p>C =<br>
  [6, 8;<br>
  10, 12]<br>
to the console.</p>
<p>Multiplication of matrices is easy as well.  Remember that the rows in the first matrix are multiplied by the columns in second matrix. You'll get an assert error from OpenCV if the number of columns in matrix A doesn't match the number of rows in matrix B. </p>
<div><div id="highlighter_819724" class="syntaxhighlighter nogutter  cpp"><div class="toolbar"><span><a href="https://www.raben.com/content/linear-algebra-opencv#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">matrixMultiplication(){</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">a[2][3] = {{ 3, 1, 2},</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{-2, 0, 5}};</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">b[3][2] = {{-1, 3},</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{0, 5},</code></div><div class="line number6 index5 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{2,5}};</code></div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat A = Mat(2, 3, CV_32FC1, a);</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat B = Mat(3, 2, CV_32FC1, b);</code></div><div class="line number9 index8 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat C;</code></div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">C = A * B;</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">cout &lt;&lt; </code><code class="cpp string">"C = A * B"</code> <code class="cpp plain">&lt;&lt; endl &lt;&lt; </code><code class="cpp string">" "</code> <code class="cpp plain">&lt;&lt; C &lt;&lt; endl &lt;&lt; endl;</code></div><div class="line number12 index11 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">C = B * A;</code></div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">cout &lt;&lt; </code><code class="cpp string">"C = B * A"</code> <code class="cpp plain">&lt;&lt; endl &lt;&lt; </code><code class="cpp string">" "</code> <code class="cpp plain">&lt;&lt; C &lt;&lt; endl &lt;&lt; endl;</code></div><div class="line number14 index13 alt1"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div><p>This will output:</p>
<p>C = A * B :<br>
 [1, 24;<br>
 12, 19]</p>
<p>C=B*A:<br>
 [-9, -1, 13;<br>
  -10, 0, 25;<br>
  -4, 2, 29]</p>
<p>To solve a linear equation such as:</p>
<p>3x + 2y = 7<br>
-6x + 6y = 6</p>
<p>We start by  representing the equation in matrix form:<br>
AX = B</p>
<p>The elements of matrix A are set to  the coefficients of the variables on the left hand side of the equation and matrix B is set to the right hand values.</p>
<p>To solve we simply take the inverse of matrix A times matrix B<br>
X=A<sup>-1</sup>B</p>
<div><div id="highlighter_477908" class="syntaxhighlighter nogutter  cpp"><div class="toolbar"><span><a href="https://www.raben.com/content/linear-algebra-opencv#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="cpp keyword bold">void</code> <code class="cpp plain">solveLinearEquation() {</code></div><div class="line number2 index1 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// 3x + 2y = 7</code></div><div class="line number3 index2 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp comments">// -6x + 6y = 6</code></div><div class="line number4 index3 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">a[2][2] = {{ 3, 2},</code></div><div class="line number5 index4 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{-6, 6}};</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp color1 bold">float</code> <code class="cpp plain">b[2][1] = { {7},</code></div><div class="line number8 index7 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">{6} };</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat A = Mat(2,2 ,CV_32FC1, a);</code></div><div class="line number11 index10 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat B = Mat(2,1, CV_32FC1, b);</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">Mat x = A.inv() * B;</code></div><div class="line number14 index13 alt1"><code class="cpp spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="cpp plain">cout &lt;&lt; </code><code class="cpp string">"x="</code> <code class="cpp plain">&lt;&lt; endl &lt;&lt; </code><code class="cpp string">" "</code> <code class="cpp plain">&lt;&lt; x &lt;&lt; endl;</code></div><div class="line number15 index14 alt2"><code class="cpp plain">}</code></div></div></td></tr></tbody></table></div></div><p>This will output the solution:</p>
<p>x=<br>
 [1; 2]<br>
 to the console.</p>
<p>If your memories of linear algebra class have faded (like mine have), you might take it look at the some of the excellent videos that the KhanAcademy has online at <a href="http://www.khanacademy.org/math/linear-algebra">http://www.khanacademy.org/math/linear-algebra</a> .</p>
</div></div></div>  </div>

  <div class="clearfix">
          <div class="links"></div>
    
      </div>

</div>
  </div>
</div>
  </div>
          </div>
                      <div class="region region-footer">
    <div id="block-system-powered-by" class="block block-system clearfix">

    
  <div class="content">
    <span>Powered by <a href="https://www.drupal.org/">Drupal</a></span>  </div>
</div>
  </div>
      </div></div></div></div> <!-- /.left-corner, /.right-corner, /#squeeze, /#center -->

      
    </div> <!-- /#container -->
  </div> <!-- /#wrapper -->
  <script type="text/javascript" src="./Linear algebra with OpenCV _ Raben Systems, Inc._files/js_Rk5YIkK6m2gKTGH-GrMu0pM_PlMKXnI0ktQUgXw1XgA.js.下載"></script>


</body></html>